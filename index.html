<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hello World</title>
  <style>
    :root { color-scheme: dark; }
    html, body {
      height: 100%;
      margin: 0;
      overflow: hidden;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    }

    /* Fullscreen animated background */
    #bg { position: fixed; inset: 0; width: 100vw; height: 100vh; display: block; }

    /* Foreground content */
    .content {
      position: fixed;
      inset: 0;
      display: grid;
      place-items: center;
      pointer-events: none;
      z-index: 5;
      opacity: 1;
      transition: opacity 260ms ease;
    }
    .content.is-hidden {
      opacity: 0;
    }
    /* When hidden, allow clicks to pass through without selecting text */
    .content.is-hidden .title { filter: blur(0.5px); }

    .title {
      font-size: clamp(48px, 8vw, 110px);
      font-weight: 800;
      letter-spacing: -0.03em;
      line-height: 1;
      color: rgba(255, 255, 255, 0.95);
      text-shadow:
        0 2px 18px rgba(0,0,0,0.35),
        0 0 44px rgba(255, 0, 255, 0.45),
        0 0 64px rgba(0, 150, 255, 0.30);
      padding: 24px 32px;
      border-radius: 24px;
      backdrop-filter: blur(10px) saturate(160%);
      background: rgba(0, 0, 0, 0.07);
      border: 1px solid rgba(255,255,255,0.14);
      box-shadow: 0 18px 60px rgba(0,0,0,0.22);
    }

    .vignette {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 2;
      background:
        radial-gradient(circle at 50% 45%,
          rgba(0,0,0,0.00) 0%,
          rgba(0,0,0,0.24) 72%,
          rgba(0,0,0,0.44) 100%);
      mix-blend-mode: multiply;
    }

    /* Toggle button */
    #toggleHello {
      position: fixed;
      bottom: 18px;
      right: 18px;
      z-index: 20;
      font-size: 14px;
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.25);
      background: rgba(0,0,0,0.35);
      color: rgba(255,255,255,0.95);
      backdrop-filter: blur(8px) saturate(150%);
      cursor: pointer;
      user-select: none;
      transition: transform .15s ease, background .2s ease;
    }
    #toggleHello:hover { transform: translateY(-1px); background: rgba(0,0,0,0.52); }
    #toggleHello:active { transform: translateY(0px) scale(0.98); }

    /* UI Panel */
    .panel {
      position: fixed;
      left: 18px;
      bottom: 18px;
      z-index: 20;
      width: min(340px, calc(100vw - 36px));
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(0,0,0,0.38);
      backdrop-filter: blur(10px) saturate(150%);
      box-shadow: 0 18px 60px rgba(0,0,0,0.25);
      overflow: hidden;
      color: rgba(255,255,255,0.92);
    }
    .panel header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 12px 10px;
      border-bottom: 1px solid rgba(255,255,255,0.14);
    }
    .panel header .titleText {
      font-weight: 700;
      font-size: 14px;
      letter-spacing: 0.02em;
    }
    .panel header .hint {
      font-size: 12px;
      opacity: 0.8;
      margin-left: 10px;
      white-space: nowrap;
    }
    .panel header .right {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .panel button {
      border: 1px solid rgba(255,255,255,0.20);
      background: rgba(255,255,255,0.06);
      color: rgba(255,255,255,0.92);
      border-radius: 999px;
      padding: 7px 10px;
      cursor: pointer;
      font-size: 12px;
      transition: background .2s ease, transform .15s ease;
      user-select: none;
    }
    .panel button:hover { background: rgba(255,255,255,0.12); transform: translateY(-1px); }
    .panel button:active { transform: translateY(0) scale(0.98); }

    .panel .body { padding: 12px; display: grid; gap: 10px; }
    .row { display: grid; gap: 6px; }
    .row label {
      font-size: 12px;
      opacity: 0.86;
      display: flex;
      justify-content: space-between;
      gap: 10px;
    }
    .row label span.value { font-variant-numeric: tabular-nums; opacity: 0.9; }

    select, input[type="range"] {
      width: 100%;
      accent-color: #ff00d4;
    }

    .panel.collapsed .body { display: none; }
  </style>
</head>
<body>
  <canvas id="bg" aria-hidden="true"></canvas>

  <div class="content" id="helloWrap">
    <div class="title">Hello World</div>
  </div>

  <div class="vignette"></div>

  <button id="toggleHello" type="button" title="Toggle Hello World (H)">Hide text</button>

  <aside class="panel" id="uiPanel" aria-label="Palette controls">
    <header>
      <div>
        <div class="titleText">Palette & Glow</div>
        <div class="hint">H: toggle text • P: panel</div>
      </div>
      <div class="right">
        <button id="resetBtn" type="button" title="Reset settings">Reset</button>
        <button id="panelBtn" type="button" title="Collapse/expand (P)">Collapse</button>
      </div>
    </header>

    <div class="body">
      <div class="row">
        <label for="preset">
          <span>Preset</span>
        </label>
        <select id="preset">
          <option value="neonSunset">Neon Sunset (red/yellow)</option>
          <option value="electricIce">Electric Ice (blue/cyan)</option>
          <option value="hyperPop">Hyper Pop (pink/purple)</option>
          <option value="custom">Custom</option>
        </select>
      </div>

      <div class="row">
        <label for="warmR"><span>Warm Red</span><span class="value" id="warmRVal"></span></label>
        <input id="warmR" type="range" min="0" max="1.5" step="0.01" />
      </div>
      <div class="row">
        <label for="warmG"><span>Warm Green</span><span class="value" id="warmGVal"></span></label>
        <input id="warmG" type="range" min="0" max="1.5" step="0.01" />
      </div>
      <div class="row">
        <label for="warmB"><span>Warm Blue</span><span class="value" id="warmBVal"></span></label>
        <input id="warmB" type="range" min="0" max="1.5" step="0.01" />
      </div>

      <div class="row">
        <label for="coolR"><span>Cool Red</span><span class="value" id="coolRVal"></span></label>
        <input id="coolR" type="range" min="0" max="1.5" step="0.01" />
      </div>
      <div class="row">
        <label for="coolG"><span>Cool Green</span><span class="value" id="coolGVal"></span></label>
        <input id="coolG" type="range" min="0" max="1.5" step="0.01" />
      </div>
      <div class="row">
        <label for="coolB"><span>Cool Blue</span><span class="value" id="coolBVal"></span></label>
        <input id="coolB" type="range" min="0" max="1.5" step="0.01" />
      </div>

      <div class="row">
        <label for="sparkR"><span>Yellow Spark Red</span><span class="value" id="sparkRVal"></span></label>
        <input id="sparkR" type="range" min="0" max="1.8" step="0.01" />
      </div>
      <div class="row">
        <label for="sparkG"><span>Yellow Spark Green</span><span class="value" id="sparkGVal"></span></label>
        <input id="sparkG" type="range" min="0" max="1.8" step="0.01" />
      </div>
      <div class="row">
        <label for="sparkB"><span>Yellow Spark Blue</span><span class="value" id="sparkBVal"></span></label>
        <input id="sparkB" type="range" min="0" max="1.8" step="0.01" />
      </div>

      <div class="row">
        <label for="brightness"><span>Brightness</span><span class="value" id="brightnessVal"></span></label>
        <input id="brightness" type="range" min="0.8" max="1.8" step="0.01" />
      </div>
      <div class="row">
        <label for="saturation"><span>Saturation</span><span class="value" id="saturationVal"></span></label>
        <input id="saturation" type="range" min="0.8" max="1.8" step="0.01" />
      </div>
      <div class="row">
        <label for="sparkPower"><span>Spark Power</span><span class="value" id="sparkPowerVal"></span></label>
        <input id="sparkPower" type="range" min="0.0" max="2.5" step="0.01" />
      </div>
    </div>
  </aside>

  <script>
    // ------------------------------
    // WebGL neon swirly background
    // ------------------------------
    const canvas = document.getElementById("bg");
    const gl = canvas.getContext("webgl", { antialias: false, premultipliedAlpha: false });

    if (!gl) {
      document.body.style.background = "linear-gradient(120deg, #ff00d4, #ff2b2b, #1e6bff, #ffd200)";
      throw new Error("WebGL not supported");
    }

    const vertSrc = `
      attribute vec2 a_pos;
      varying vec2 v_uv;
      void main() {
        v_uv = a_pos * 0.5 + 0.5;
        gl_Position = vec4(a_pos, 0.0, 1.0);
      }
    `;

    // Motion kept "flowy + big blobs"; palette controlled via uniforms.
    const fragSrc = `
      precision highp float;
      varying vec2 v_uv;
      uniform vec2 u_res;
      uniform float u_time;

      uniform vec3 u_warm;      // warm base (biased to reds/yellows)
      uniform vec3 u_cool;      // cool base (biased to blues/cyans)
      uniform vec3 u_spark;     // spark color (often yellow)
      uniform float u_brightness;
      uniform float u_saturation;
      uniform float u_sparkPower;

      float hash(vec2 p){
        p = fract(p * vec2(123.34,456.21));
        p += dot(p,p+45.32);
        return fract(p.x*p.y);
      }

      float noise(vec2 p){
        vec2 i = floor(p);
        vec2 f = fract(p);
        float a = hash(i);
        float b = hash(i+vec2(1.,0.));
        float c = hash(i+vec2(0.,1.));
        float d = hash(i+vec2(1.,1.));
        vec2 u = f*f*(3.-2.*f);
        return mix(a,b,u.x)+(c-a)*u.y*(1.-u.x)+(d-b)*u.x*u.y;
      }

      float fbm(vec2 p){
        float v=0.;
        float a=.5;
        mat2 m=mat2(1.6,1.2,-1.2,1.6);
        for(int i=0;i<5;i++){
          v+=a*noise(p);
          p=m*p;
          a*=.5;
        }
        return v;
      }

      // Bright spectrum base (adds "neon variety"), then we blend warm/cool over it.
      vec3 neonSpectrum(float t){
        vec3 col = vec3(
          0.6 + 0.6*cos(6.28318*(t+0.00)),
          0.5 + 0.5*cos(6.28318*(t+0.33)),
          0.6 + 0.6*cos(6.28318*(t+0.67))
        );
        col = pow(max(col, 0.0), vec3(0.75));
        col *= 1.25;
        return col;
      }

      vec3 saturate(vec3 c, float s){
        float l = dot(c, vec3(0.2126, 0.7152, 0.0722));
        return mix(vec3(l), c, s);
      }

      void main(){
        vec2 uv = v_uv;
        vec2 p = uv*2.0-1.0;
        p.x *= u_res.x/u_res.y;

        // Flowy motion (slow)
        float t = u_time*0.085;

        // Big blobs (lower frequency)
        float baseScale = 0.75;
        float warpScale = 1.10;

        vec2 q = vec2(
          fbm(p*baseScale + vec2(0., t*1.1)),
          fbm(p*baseScale + vec2(4.2, t*1.0))
        );

        vec2 r = vec2(
          fbm(p*warpScale + 2.2*q + vec2(1.7,-9.2)+t*0.65),
          fbm(p*warpScale + 2.2*q + vec2(8.3, 2.8)-t*0.70)
        );

        float f = fbm(p*1.1 + 2.6*r);

        float cells = smoothstep(0.10, 0.98, f);

        float ridges = 1.0 - abs(2.0*f - 1.0);
        ridges = smoothstep(0.10, 0.95, ridges);
        ridges = pow(ridges, 2.0);

        float band = (p.x*0.28 + p.y*-0.08) + f*0.90;
        vec3 base = neonSpectrum(band);

        // Left/right temperature bias
        float lr = smoothstep(-1.15, 1.15, p.x);

        vec3 warm = clamp(u_warm, 0.0, 3.0);
        vec3 cool = clamp(u_cool, 0.0, 3.0);

        vec3 temp = mix(warm, cool, lr);

        // Blend temperature over spectrum, keep variety
        vec3 col = temp * 0.62 + base * 0.95;

        // Glow shaping
        float glow = 0.72*cells + 1.95*ridges;

        // Sparks (domain-based hotspots)
        float hot = pow(clamp(fbm(p*2.0 + r*1.6 + t), 0.0, 1.0), 4.0);

        vec3 sparks = clamp(u_spark, 0.0, 3.0) * hot * (1.2 * u_sparkPower);

        vec3 outCol = col * (0.66 + 1.12*glow) + sparks;

        // Brightness + saturation control
        outCol *= u_brightness;
        outCol = saturate(outCol, u_saturation);

        // Tonemap-ish curve
        outCol = outCol / (outCol + vec3(0.70));
        outCol = pow(outCol, vec3(0.90));

        gl_FragColor = vec4(outCol, 1.0);
      }
    `;

    function compile(type, src) {
      const s = gl.createShader(type);
      gl.shaderSource(s, src);
      gl.compileShader(s);
      if (!gl.getShaderParameter(s, gl.COMPILE_STATUS)) {
        const msg = gl.getShaderInfoLog(s);
        gl.deleteShader(s);
        throw new Error(msg);
      }
      return s;
    }

    const vs = compile(gl.VERTEX_SHADER, vertSrc);
    const fs = compile(gl.FRAGMENT_SHADER, fragSrc);
    const prog = gl.createProgram();
    gl.attachShader(prog, vs);
    gl.attachShader(prog, fs);
    gl.linkProgram(prog);
    if (!gl.getProgramParameter(prog, gl.LINK_STATUS)) {
      throw new Error(gl.getProgramInfoLog(prog));
    }
    gl.useProgram(prog);

    // Fullscreen quad
    const buf = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, buf);
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
      -1,-1,  1,-1, -1, 1,
      -1, 1,  1,-1,  1, 1
    ]), gl.STATIC_DRAW);

    const aPos = gl.getAttribLocation(prog, "a_pos");
    gl.enableVertexAttribArray(aPos);
    gl.vertexAttribPointer(aPos, 2, gl.FLOAT, false, 0, 0);

    const uRes = gl.getUniformLocation(prog, "u_res");
    const uTime = gl.getUniformLocation(prog, "u_time");
    const uWarm = gl.getUniformLocation(prog, "u_warm");
    const uCool = gl.getUniformLocation(prog, "u_cool");
    const uSpark = gl.getUniformLocation(prog, "u_spark");
    const uBrightness = gl.getUniformLocation(prog, "u_brightness");
    const uSaturation = gl.getUniformLocation(prog, "u_saturation");
    const uSparkPower = gl.getUniformLocation(prog, "u_sparkPower");

    function resize() {
      const dpr = Math.min(2, window.devicePixelRatio || 1);
      const w = Math.floor(innerWidth * dpr);
      const h = Math.floor(innerHeight * dpr);
      if (canvas.width !== w || canvas.height !== h) {
        canvas.width = w;
        canvas.height = h;
        canvas.style.width = innerWidth + "px";
        canvas.style.height = innerHeight + "px";
        gl.viewport(0, 0, w, h);
        gl.uniform2f(uRes, w, h);
      }
    }
    window.addEventListener("resize", resize, { passive: true });
    resize();

    // ------------------------------
    // UI + localStorage state
    // ------------------------------
    const KEY = "neonSiteState.v1";

    const defaults = {
      helloVisible: true,
      panelCollapsed: false,
      preset: "neonSunset",
      warm: [1.20, 0.22, 0.10],
      cool: [0.12, 0.30, 1.25],
      spark: [1.35, 1.18, 0.12],
      brightness: 1.25,
      saturation: 1.25,
      sparkPower: 1.10
    };

    const presets = {
      neonSunset: {
        warm: [1.35, 0.18, 0.10],
        cool: [0.15, 0.30, 1.20],
        spark: [1.45, 1.25, 0.15],
        brightness: 1.28,
        saturation: 1.30,
        sparkPower: 1.15
      },
      electricIce: {
        warm: [1.10, 0.25, 0.15],
        cool: [0.00, 0.85, 1.45],
        spark: [1.10, 1.35, 0.35],
        brightness: 1.24,
        saturation: 1.30,
        sparkPower: 1.05
      },
      hyperPop: {
        warm: [1.25, 0.10, 0.55],
        cool: [0.35, 0.15, 1.35],
        spark: [1.60, 1.10, 0.35],
        brightness: 1.30,
        saturation: 1.45,
        sparkPower: 1.20
      }
    };

    function loadState() {
      try {
        const raw = localStorage.getItem(KEY);
        if (!raw) return structuredClone(defaults);
        const parsed = JSON.parse(raw);
        return {
          ...structuredClone(defaults),
          ...parsed,
          warm: Array.isArray(parsed.warm) ? parsed.warm : defaults.warm,
          cool: Array.isArray(parsed.cool) ? parsed.cool : defaults.cool,
          spark: Array.isArray(parsed.spark) ? parsed.spark : defaults.spark,
        };
      } catch {
        return structuredClone(defaults);
      }
    }

    function saveState() {
      localStorage.setItem(KEY, JSON.stringify(state));
    }

    let state = loadState();

    // Elements
    const helloWrap = document.getElementById("helloWrap");
    const toggleBtn = document.getElementById("toggleHello");

    const uiPanel = document.getElementById("uiPanel");
    const panelBtn = document.getElementById("panelBtn");
    const resetBtn = document.getElementById("resetBtn");
    const presetSel = document.getElementById("preset");

    const sliders = {
      warmR: document.getElementById("warmR"),
      warmG: document.getElementById("warmG"),
      warmB: document.getElementById("warmB"),
      coolR: document.getElementById("coolR"),
      coolG: document.getElementById("coolG"),
      coolB: document.getElementById("coolB"),
      sparkR: document.getElementById("sparkR"),
      sparkG: document.getElementById("sparkG"),
      sparkB: document.getElementById("sparkB"),
      brightness: document.getElementById("brightness"),
      saturation: document.getElementById("saturation"),
      sparkPower: document.getElementById("sparkPower"),
    };

    const vals = {
      warmRVal: document.getElementById("warmRVal"),
      warmGVal: document.getElementById("warmGVal"),
      warmBVal: document.getElementById("warmBVal"),
      coolRVal: document.getElementById("coolRVal"),
      coolGVal: document.getElementById("coolGVal"),
      coolBVal: document.getElementById("coolBVal"),
      sparkRVal: document.getElementById("sparkRVal"),
      sparkGVal: document.getElementById("sparkGVal"),
      sparkBVal: document.getElementById("sparkBVal"),
      brightnessVal: document.getElementById("brightnessVal"),
      saturationVal: document.getElementById("saturationVal"),
      sparkPowerVal: document.getElementById("sparkPowerVal"),
    };

    function setHelloVisible(visible) {
      state.helloVisible = visible;
      if (visible) {
        helloWrap.style.display = "grid";
        // allow transition from 0 → 1
        requestAnimationFrame(() => helloWrap.classList.remove("is-hidden"));
        toggleBtn.textContent = "Hide text";
      } else {
        helloWrap.classList.add("is-hidden");
        toggleBtn.textContent = "Show text";
        // after fade completes, remove from layout (optional)
        window.setTimeout(() => {
          if (!state.helloVisible) helloWrap.style.display = "none";
        }, 280);
      }
      saveState();
    }

    function setPanelCollapsed(collapsed) {
      state.panelCollapsed = collapsed;
      uiPanel.classList.toggle("collapsed", collapsed);
      panelBtn.textContent = collapsed ? "Expand" : "Collapse";
      saveState();
    }

    function applyUniforms() {
      gl.useProgram(prog);
      gl.uniform3f(uWarm, state.warm[0], state.warm[1], state.warm[2]);
      gl.uniform3f(uCool, state.cool[0], state.cool[1], state.cool[2]);
      gl.uniform3f(uSpark, state.spark[0], state.spark[1], state.spark[2]);
      gl.uniform1f(uBrightness, state.brightness);
      gl.uniform1f(uSaturation, state.saturation);
      gl.uniform1f(uSparkPower, state.sparkPower);
    }

    function fmt(n) { return (+n).toFixed(2); }

    function syncUIFromState() {
      presetSel.value = state.preset;

      sliders.warmR.value = state.warm[0]; vals.warmRVal.textContent = fmt(state.warm[0]);
      sliders.warmG.value = state.warm[1]; vals.warmGVal.textContent = fmt(state.warm[1]);
      sliders.warmB.value = state.warm[2]; vals.warmBVal.textContent = fmt(state.warm[2]);

      sliders.coolR.value = state.cool[0]; vals.coolRVal.textContent = fmt(state.cool[0]);
      sliders.coolG.value = state.cool[1]; vals.coolGVal.textContent = fmt(state.cool[1]);
      sliders.coolB.value = state.cool[2]; vals.coolBVal.textContent = fmt(state.cool[2]);

      sliders.sparkR.value = state.spark[0]; vals.sparkRVal.textContent = fmt(state.spark[0]);
      sliders.sparkG.value = state.spark[1]; vals.sparkGVal.textContent = fmt(state.spark[1]);
      sliders.sparkB.value = state.spark[2]; vals.sparkBVal.textContent = fmt(state.spark[2]);

      sliders.brightness.value = state.brightness; vals.brightnessVal.textContent = fmt(state.brightness);
      sliders.saturation.value = state.saturation; vals.saturationVal.textContent = fmt(state.saturation);
      sliders.sparkPower.value = state.sparkPower; vals.sparkPowerVal.textContent = fmt(state.sparkPower);

      setPanelCollapsed(state.panelCollapsed);
      // Initialize hello visibility without forcing a transition flash
      if (state.helloVisible) {
        helloWrap.style.display = "grid";
        helloWrap.classList.remove("is-hidden");
        toggleBtn.textContent = "Hide text";
      } else {
        helloWrap.style.display = "none";
        helloWrap.classList.add("is-hidden");
        toggleBtn.textContent = "Show text";
      }

      applyUniforms();
    }

    function applyPreset(name) {
      if (!presets[name]) return;
      const p = presets[name];
      state.preset = name;
      state.warm = [...p.warm];
      state.cool = [...p.cool];
      state.spark = [...p.spark];
      state.brightness = p.brightness;
      state.saturation = p.saturation;
      state.sparkPower = p.sparkPower;
      saveState();
      syncUIFromState();
    }

    // UI handlers
    toggleBtn.addEventListener("click", () => setHelloVisible(!state.helloVisible));

    panelBtn.addEventListener("click", () => setPanelCollapsed(!state.panelCollapsed));

    resetBtn.addEventListener("click", () => {
      state = structuredClone(defaults);
      saveState();
      syncUIFromState();
    });

    presetSel.addEventListener("change", (e) => {
      const v = e.target.value;
      if (v === "custom") {
        state.preset = "custom";
        saveState();
        // keep current values
        return;
      }
      applyPreset(v);
    });

    function markCustom() {
      if (state.preset !== "custom") {
        state.preset = "custom";
        presetSel.value = "custom";
      }
    }

    function bindSlider(slider, onChange) {
      const handler = () => {
        onChange(parseFloat(slider.value));
        markCustom();
        saveState();
        applyUniforms();
        syncValueReadoutsOnly();
      };
      slider.addEventListener("input", handler);
      slider.addEventListener("change", handler);
    }

    function syncValueReadoutsOnly() {
      vals.warmRVal.textContent = fmt(state.warm[0]);
      vals.warmGVal.textContent = fmt(state.warm[1]);
      vals.warmBVal.textContent = fmt(state.warm[2]);
      vals.coolRVal.textContent = fmt(state.cool[0]);
      vals.coolGVal.textContent = fmt(state.cool[1]);
      vals.coolBVal.textContent = fmt(state.cool[2]);
      vals.sparkRVal.textContent = fmt(state.spark[0]);
      vals.sparkGVal.textContent = fmt(state.spark[1]);
      vals.sparkBVal.textContent = fmt(state.spark[2]);
      vals.brightnessVal.textContent = fmt(state.brightness);
      vals.saturationVal.textContent = fmt(state.saturation);
      vals.sparkPowerVal.textContent = fmt(state.sparkPower);
    }

    bindSlider(sliders.warmR, (v) => state.warm[0] = v);
    bindSlider(sliders.warmG, (v) => state.warm[1] = v);
    bindSlider(sliders.warmB, (v) => state.warm[2] = v);

    bindSlider(sliders.coolR, (v) => state.cool[0] = v);
    bindSlider(sliders.coolG, (v) => state.cool[1] = v);
    bindSlider(sliders.coolB, (v) => state.cool[2] = v);

    bindSlider(sliders.sparkR, (v) => state.spark[0] = v);
    bindSlider(sliders.sparkG, (v) => state.spark[1] = v);
    bindSlider(sliders.sparkB, (v) => state.spark[2] = v);

    bindSlider(sliders.brightness, (v) => state.brightness = v);
    bindSlider(sliders.saturation, (v) => state.saturation = v);
    bindSlider(sliders.sparkPower, (v) => state.sparkPower = v);

    // Keyboard shortcuts:
    // H = toggle Hello World
    // P = toggle panel collapse/expand
    // R = reset (optional bonus)
    window.addEventListener("keydown", (e) => {
      // ignore if typing in select/inputs
      const tag = (e.target && e.target.tagName) ? e.target.tagName.toLowerCase() : "";
      if (tag === "input" || tag === "select" || tag === "textarea") return;

      const k = e.key.toLowerCase();
      if (k === "h") setHelloVisible(!state.helloVisible);
      if (k === "p") setPanelCollapsed(!state.panelCollapsed);
      if (k === "r") { state = structuredClone(defaults); saveState(); syncUIFromState(); }
    });

    // Init
    syncUIFromState();

    // ------------------------------
    // Render loop
    // ------------------------------
    const start = performance.now();
    function frame(now) {
      resize();
      gl.uniform1f(uTime, (now - start) / 1000.0);
      gl.drawArrays(gl.TRIANGLES, 0, 6);
      requestAnimationFrame(frame);
    }
    requestAnimationFrame(frame);
  </script>
</body>
</html>